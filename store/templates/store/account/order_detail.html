{% extends 'store/base.html' %}
{% load static %}

{% block title %}Order #{{ order.order_number }} - {{ site_config.site_name }}{% endblock %}

{% block content %}
<section style="padding: 100px var(--page-padding) 60px; min-height: 80vh;">
    <div style="max-width: 1200px; margin: 0 auto;">
        <a href="{% url 'store:my_orders' %}" style="color: var(--primary); text-decoration: none; margin-bottom: 24px; display: inline-block;">← Back to Orders</a>
        
        <h1 style="font-size: 36px; margin-bottom: 32px; color: var(--primary);">Order #{{ order.order_number }}</h1>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px; margin-bottom: 32px;">
            <div style="background: var(--card-strong); padding: 24px; border-radius: 12px; box-shadow: var(--shadow-sm);">
                <h2 style="font-size: 20px; margin-bottom: 20px;">Order Items</h2>
                <div style="display: grid; gap: 16px;">
                    {% for item in order.items.all %}
                    <div style="display: flex; gap: 16px; padding-bottom: 16px; border-bottom: 1px solid var(--border);">
                        <div style="width: 80px; height: 80px; background: var(--bg-soft); border-radius: 8px; flex-shrink: 0;">
                            {% if item.product %}
                                <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                            {% elif item.combo %}
                                <img src="{{ item.combo.image.url }}" alt="{{ item.combo.title }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                            {% endif %}
                        </div>
                        <div style="flex: 1;">
                            <h3 style="font-size: 16px; margin-bottom: 4px;">{{ item.product.name|default:item.combo.title }}</h3>
                            {% if item.variant %}
                                <p style="color: var(--text-muted); font-size: 14px;">{{ item.variant.ml }}ml</p>
                            {% endif %}
                            <p style="margin-top: 8px; font-weight: 600;">₹{{ item.price_at_purchase }} × {{ item.quantity }} = ₹{{ item.total_price }}</p>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <div style="background: var(--card-strong); padding: 24px; border-radius: 12px; box-shadow: var(--shadow-sm); height: fit-content;">
                <h2 style="font-size: 20px; margin-bottom: 20px;">Order Summary</h2>
                <div style="margin-bottom: 16px;">
                    <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 4px;">Status</p>
                    <p style="font-weight: 600; text-transform: capitalize;">{{ order.status }}</p>
                </div>
                <div style="margin-bottom: 16px;">
                    <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 4px;">Payment Status</p>
                    <p style="font-weight: 600; text-transform: capitalize;">{{ order.payment_status }}</p>
                </div>
                <div style="margin-bottom: 16px; padding-top: 16px; border-top: 1px solid var(--border);">
                    <p style="color: var(--text-muted); font-size: 14px; margin-bottom: 4px;">Total Amount</p>
                    <p style="font-size: 24px; font-weight: 600; color: var(--primary);">₹{{ order.total_amount }}</p>
                </div>
                
                <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
                    <h3 style="font-size: 16px; margin-bottom: 12px;">Shipping Address</h3>
                    <p style="color: var(--text-muted); font-size: 14px; line-height: 1.6;">
                        {{ order.customer_name }}<br>
                        {{ order.address_line }}<br>
                        {{ order.city }}, {{ order.pincode }}<br>
                        Phone: {{ order.phone }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

