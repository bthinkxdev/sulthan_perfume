{% extends 'store/base.html' %}
{% load static %}

{% block title %}Sulthan Fragrance - Premium Perfumes from France & Arabia{% endblock %}

{% block extra_css %}
<style>
    /* Hero Section */
    .hero {
        min-height: calc(100vh - 72px);
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        padding: 110px var(--page-padding) 90px;
        isolation: isolate;
        background: linear-gradient(180deg, rgba(44, 33, 26, 0.55), rgba(44, 33, 26, 0.32)), url("{% static 'banner.jpeg' %}") center/cover no-repeat;
    }

    .hero-banner {
        display: none;
        width: 100%;
        max-width: 1200px;
        margin: 0 auto 24px;
        border-radius: 18px;
        overflow: hidden;
        box-shadow: var(--shadow-md);
        background: #ffffff;
    }

    .hero-banner img {
        width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
    }

    .hero::after {
        content: '';
        position: absolute;
        inset: 0;
        background:
            radial-gradient(40% 35% at 20% 25%, rgba(248, 216, 197, 0.55), transparent 60%),
            radial-gradient(30% 30% at 78% 20%, rgba(244, 210, 187, 0.45), transparent 60%),
            radial-gradient(28% 28% at 15% 75%, rgba(255, 236, 221, 0.6), transparent 65%);
        z-index: 0;
        filter: blur(6px);
    }

    .hero-bg {
        position: absolute;
        inset: 0;
        background:
            radial-gradient(220px 220px at 18% 40%, rgba(255, 224, 202, 0.6), transparent 60%),
            radial-gradient(240px 240px at 72% 40%, rgba(248, 216, 197, 0.42), transparent 60%),
            radial-gradient(200px 200px at 50% 18%, rgba(244, 228, 210, 0.5), transparent 60%);
        z-index: 0;
    }

    .hero-abstract {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 0;
    }

    .hero-abstract .pill {
        position: absolute;
        border-radius: 999px;
        filter: drop-shadow(0 12px 25px rgba(196, 111, 68, 0.16));
        animation: float 7s ease-in-out infinite;
        opacity: 0.9;
    }

    .pill.p1 {
        width: 180px;
        height: 70px;
        top: 16%;
        left: 14%;
        background: linear-gradient(135deg, #f7ddc6 0%, #fbe8d7 100%);
        transform: rotate(-12deg);
    }

    .pill.p2 {
        width: 140px;
        height: 140px;
        top: 30%;
        right: 16%;
        background: radial-gradient(circle at 40% 40%, #fdeee0 0%, #f9dcc5 65%, #f5c9aa 100%);
        border-radius: 45%;
        animation-duration: 8.5s;
    }

    .pill.p3 {
        width: 120px;
        height: 48px;
        bottom: 22%;
        left: 28%;
        background: linear-gradient(135deg, #f7d6bc 0%, #f9e4d4 100%);
        transform: rotate(18deg);
        animation-duration: 6.5s;
    }

    .pill.p4 {
        width: 80px;
        height: 80px;
        bottom: 14%;
        right: 24%;
        background: radial-gradient(circle at 40% 40%, #f9d4b8, #e7b28b);
        animation-duration: 9s;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0) scale(1); }
        50% { transform: translateY(-12px) scale(1.02); }
    }

    .hero-content {
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 60px;
        align-items: center;
        position: relative;
        z-index: 1;
    }

    .hero-text {
        animation: fadeInLeft 0.8s ease-out;
    }

    .hero-eyebrow {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 16px;
        background: rgba(255, 255, 255, 0.82);
        border-radius: 999px;
        border: 1px solid rgba(248, 216, 197, 0.9);
        font-weight: 600;
        font-size: 12px;
        letter-spacing: 0.8px;
        color: var(--text-main);
        text-transform: uppercase;
        margin-bottom: 18px;
        box-shadow: var(--shadow-sm);
    }

    .hero-text h1 {
        font-family: var(--font-heading);
        font-size: 56px;
        font-weight: 700;
        line-height: 1.08;
        margin-bottom: 22px;
        color: var(--text-main);
    }

    .hero-text h1 span {
        color: var(--primary);
    }

    .hero-text p {
        font-size: 18px;
        color: var(--text-muted);
        margin-bottom: 30px;
        line-height: 1.8;
        max-width: 540px;
    }

    .hero-buttons {
        display: flex;
        gap: 14px;
        flex-wrap: wrap;
    }

    .hero-categories {
        display: flex;
        flex-wrap: wrap;
        gap: 14px;
        margin-top: 0;
    }

    .hero-cat-pill {
        text-decoration: none;
        cursor: pointer;
        display: inline-block;
        transition: all 0.3s;
    }

    /* Hero category/buttons use same brown as floating action icons (#8B5A3C / #6B4423) */
    .hero .hero-buttons .btn-primary,
    .hero .hero-buttons .btn-secondary,
    .hero .hero-cat-pill {
        background: linear-gradient(135deg, #8B5A3C 0%, #6B4423 100%);
        color: #fff;
        border: none;
        font-weight: 700;
        padding: 14px 28px;
        border-radius: 14px;
        font-size: 15px;
        letter-spacing: 0.8px;
        box-shadow: 0 8px 24px rgba(139, 90, 60, 0.35), 0 4px 12px rgba(107, 68, 35, 0.25);
    }

    /* Inactive state for category pills - outline in same brown */
    .hero .hero-cat-pill:not(.active) {
        background: rgba(255, 255, 255, 0.9);
        color: #6B4423;
        border: 1px solid #8B5A3C;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    /* Hover effects */
    .hero .hero-buttons .btn-primary:hover,
    .hero .hero-buttons .btn-secondary:hover,
    .hero .hero-cat-pill:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 32px rgba(139, 90, 60, 0.45), 0 6px 16px rgba(107, 68, 35, 0.35);
    }

    .hero .hero-cat-pill:not(.active):hover {
        background: linear-gradient(135deg, #8B5A3C 0%, #6B4423 100%);
        color: #fff;
        border-color: #8B5A3C;
    }

    .hero-product {
        animation: fadeInRight 0.8s ease-out;
        display: flex;
        justify-content: flex-end;
    }

    .hero-product-card {
        display: grid;
        gap: 16px;
        width: 100%;
        max-width: 440px;
        border-radius: 26px;
    }

    .hero-product-media {
        background: linear-gradient(180deg, #ffffff 0%, #fff9f4 100%);
        border-radius: 26px;
        border: 1px solid rgba(196, 111, 68, 0.18);
        padding: 18px;
        box-shadow: var(--shadow-md);
    }

    .hero-product-image {
        width: 100%;
        height: 360px;
        object-fit: contain;
        border-radius: 18px;
        margin: 0;
        box-shadow: 0 12px 24px rgba(26, 18, 12, 0.12);
        background: #ffffff;
    }

    .hero-product-info {
        background: linear-gradient(180deg, #ffffff 0%, #fff8f1 100%);
        border-radius: 22px;
        border: 1px solid rgba(196, 111, 68, 0.18);
        padding: 18px 18px 20px;
        box-shadow: 0 18px 42px rgba(26, 18, 12, 0.14);
        display: grid;
        gap: 12px;
    }

    .hero-product-head {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 10px;
    }

    .hero-add-to-cart {
        width: 100%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* Section Styles */
    .section {
        padding: 90px 0 70px;
    }

    .section-header {
        text-align: center;
        margin-bottom: 56px;
    }

    .section-title {
        font-family: var(--font-heading);
        font-size: 40px;
        font-weight: 700;
        margin-bottom: 14px;
        color: var(--text-main);
    }

    .section-title span {
        background: linear-gradient(135deg, var(--primary) 0%, #c46f44 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .section-subtitle {
        color: var(--text-muted);
        font-size: 16px;
        max-width: 620px;
        margin: 0 auto;
    }

    /* Products Grid */
    .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 22px;
    }

    .product-card {
        background: linear-gradient(180deg, #ffffff 0%, #fff8f1 100%);
        border-radius: 22px;
        border: 1px solid rgba(196, 111, 68, 0.18);
        overflow: hidden;
        transition: var(--transition-smooth);
        cursor: pointer;
        box-shadow: 0 16px 38px rgba(26, 18, 12, 0.12);
        position: relative;
        isolation: isolate;
        padding: 10px;
    }

    .product-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 48px rgba(26, 18, 12, 0.16);
        border-color: rgba(196, 111, 68, 0.32);
    }

    .product-card::after {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 70% 20%, rgba(244, 210, 187, 0.22), transparent 45%);
        z-index: 0;
    }

    .product-image {
        width: 100%;
        height: 240px;
        object-fit: cover;
        transition: var(--transition-smooth);
        z-index: 1;
        position: relative;
        border-radius: 16px;
        box-shadow: 0 10px 24px rgba(26, 18, 12, 0.12);
    }

    .product-card:hover .product-image {
        transform: scale(1.04);
    }

    /* Glass & blur accents */
    .hero-product-card,
    .product-card,
    .combo-card,
    .feature,
    .why-choose {
        background: rgba(255, 255, 255, 0.9);
        border-color: rgba(239, 223, 211, 0.9);
        backdrop-filter: var(--blur-light);
        -webkit-backdrop-filter: var(--blur-light);
    }

    .product-info {
        padding: 16px 16px 18px;
        position: relative;
        z-index: 1;
        background: #ffffff;
        border-radius: 14px;
        border: 1px solid rgba(196, 111, 68, 0.14);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
    }

    .product-origin {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        background: rgba(248, 216, 197, 0.9);
        color: var(--primary);
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 11px;
        font-weight: 700;
        letter-spacing: 0.5px;
        margin-bottom: 12px;
        text-transform: uppercase;
        box-shadow: 0 6px 14px rgba(196, 111, 68, 0.18);
        border: 1px solid rgba(196, 111, 68, 0.18);
    }

    .product-head {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        gap: 8px;
        margin-bottom: 8px;
    }

    .product-name {
        font-family: var(--font-heading);
        font-size: 22px;
        font-weight: 700;
        color: var(--text-main);
        margin: 0;
    }

    .product-desc {
        color: var(--text-muted);
        font-size: 14px;
        margin-bottom: 14px;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .product-footer {
        display: flex;
        justify-content: flex-end;
        align-items: center;
        margin-top: 12px;
    }

    .product-price {
        font-size: 22px;
        font-weight: 700;
        color: var(--primary);
        background: rgba(196, 111, 68, 0.08);
        padding: 8px 12px;
        border-radius: 12px;
        border: 1px solid rgba(196, 111, 68, 0.16);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .add-to-cart-btn {
        background: linear-gradient(135deg, #c46f44 0%, #f2b880 100%);
        color: var(--white);
        border: none;
        padding: 12px 18px;
        border-radius: 14px;
        font-weight: 700;
        font-size: 14px;
        cursor: pointer;
        transition: var(--transition-smooth);
        box-shadow: 0 12px 26px rgba(196, 111, 68, 0.25);
    }

    .add-to-cart-btn:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 14px 32px rgba(196, 111, 68, 0.32);
    }

    /* Combo Cards */
    .combo-card {
        background: linear-gradient(180deg, #ffffff 0%, #fff5eb 100%);
        border-radius: 22px;
        border: 1px solid rgba(196, 111, 68, 0.18);
        padding: 24px;
        transition: var(--transition-smooth);
        position: relative;
        overflow: hidden;
        box-shadow: 0 18px 42px rgba(26, 18, 12, 0.14);
    }

    {% comment %} .combo-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(90deg, #c46f44 0%, #f4c29a 100%);
        opacity: 0.9;
    } {% endcomment %}

    .combo-images {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
        margin-bottom: 16px;
    }

    .combo-image-wrapper {
        position: relative;
        border-radius: 14px;
        overflow: hidden;
        border: 1px solid var(--border);
        background: rgba(255, 255, 255, 0.75);
    }

    .combo-image {
        width: 100%;
        height: 150px;
        object-fit: cover;
        display: block;
        transition: var(--transition-smooth);
        border-radius: 14px;
        box-shadow: 0 10px 24px rgba(26, 18, 12, 0.12);
    }

    .combo-image-label {
        position: absolute;
        left: 10px;
        right: 10px;
        bottom: 10px;
        background: rgba(44, 33, 26, 0.78);
        color: var(--white);
        padding: 7px 10px;
        border-radius: 10px;
        font-size: 12px;
        font-weight: 600;
        text-align: center;
        backdrop-filter: blur(6px);
    }

    .combo-card:hover .combo-image {
        transform: scale(1.02);
    }

    .combo-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 22px 52px rgba(26, 18, 12, 0.18);
        border-color: rgba(196, 111, 68, 0.28);
    }

    .combo-badge {
        display: inline-block;
        background: linear-gradient(135deg, #c46f44 0%, #f4c29a 100%);
        color: var(--white);
        padding: 7px 16px;
        border-radius: 999px;
        font-size: 12px;
        font-weight: 700;
        margin-bottom: 14px;
        text-transform: uppercase;
        letter-spacing: 0.4px;
    }

    .combo-title {
        font-family: var(--font-heading);
        font-size: 24px;
        font-weight: 700;
        color: var(--text-main);
        margin-bottom: 12px;
    }

    .combo-products {
        display: flex;
        gap: 10px;
        margin-bottom: 18px;
        flex-wrap: wrap;
    }

    .combo-product-tag {
        background: rgba(244, 210, 187, 0.7);
        padding: 8px 14px;
        border-radius: 12px;
        font-size: 13px;
        color: var(--primary-strong);
        font-weight: 600;
    }

    .combo-pricing {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
    }

    .combo-original-price {
        font-size: 18px;
        color: var(--text-muted);
        text-decoration: line-through;
    }

    .combo-price {
        font-size: 26px;
        font-weight: 800;
        color: var(--primary);
        background: rgba(196, 111, 68, 0.08);
        padding: 6px 12px;
        border-radius: 12px;
        border: 1px solid rgba(196, 111, 68, 0.16);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }

    .combo-discount {
        background: var(--accent-yellow);
        color: var(--text-main);
        padding: 5px 12px;
        border-radius: 12px;
        font-size: 13px;
        font-weight: 700;
    }

    /* Why Choose Section */
    .why-choose {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 28px;
        padding: 56px 40px;
        margin: 80px 0;
        border: 1px solid var(--border);
        box-shadow: var(--shadow-sm);
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 32px;
        margin-top: 32px;
    }

    .feature {
        text-align: center;
        padding: 16px;
    }

    .feature-icon {
        font-size: 44px;
        margin-bottom: 12px;
        color: var(--primary);
    }

    .feature-title {
        font-size: 17px;
        font-weight: 700;
        color: var(--text-main);
        margin-bottom: 8px;
    }

    .feature-desc {
        color: var(--text-muted);
        font-size: 14px;
    }

    /* Animations */
    @keyframes fadeInLeft {
        from {
            opacity: 0;
            transform: translateX(-30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes fadeInRight {
        from {
            opacity: 0;
            transform: translateX(30px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    /* Responsive */
    @media (max-width: 1080px) {
        .hero-content {
            grid-template-columns: 1fr;
            gap: 44px;
        }

        .hero-text h1 {
            font-size: 46px;
        }
    }

    @media (max-width: 768px) {
        .hero {
            padding: 32px var(--page-padding) 44px;
            background: var(--bg-soft);
            min-height: auto;
        }

        .hero-content {
            display: flex;
            flex-direction: column;
            gap: 18px;
        }

        .hero-product {
            width: 100%;
            justify-content: center;
        }

        .hero-product-card {
            width: 100%;
            max-width: 100%;
        }

        .section {
            padding: 60px 0 50px;
        }

        .section-header {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 32px;
            line-height: 1.3;
        }

        .section-subtitle {
            font-size: 15px;
            line-height: 1.6;
        }

        .hero-banner {
            display: block;
            order: 1;
        }

        .hero-text {
            order: 2;
        }

        .hero-product {
            order: 3;
        }

        .hero-text h1 {
            font-size: 32px;
            line-height: 1.15;
            margin-bottom: 16px;
        }

        .hero-text p {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .hero-eyebrow {
            margin-bottom: 14px;
            font-size: 11px;
            padding: 8px 14px;
        }

        /* Mobile: 2 buttons per row with fixed size */
        .hero-buttons {
            gap: 10px;
            justify-content: space-between;
        }

        .hero-buttons .btn-primary,
        .hero-buttons .btn-secondary,
        .hero-buttons .hero-cat-pill {
            flex: 1 1 calc(50% - 5px);
            min-width: calc(50% - 5px);
            max-width: calc(50% - 5px);
            padding: 12px 8px !important;
            font-size: 13px !important;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .hero-categories {
            margin-top: 0;
            gap: 10px;
        }

        .hero-product-card {
            max-width: 400px;
            gap: 14px;
        }

        .hero-product-media {
            padding: 16px;
        }

        .hero-product-info {
            padding: 16px;
        }

        .hero-product-image {
            height: 300px;
        }

        .products-grid {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .section {
            padding: 70px 0 60px;
        }

        .why-choose {
            padding: 40px 22px;
        }

        .product-card {
            padding: 10px;
            border-radius: 20px;
            box-shadow: 0 14px 32px rgba(26, 18, 12, 0.12);
            max-width: 340px;
            margin-left: auto;
            margin-right: auto;
        }

        .product-image {
            height: 210px;
        }

        .product-info {
            padding: 14px;
            border-radius: 12px;
        }

        .product-name {
            font-size: 20px;
        }

        .product-desc {
            font-size: 13px;
        }

        .product-price {
            font-size: 20px;
        }

        .add-to-cart-btn {
            padding: 10px 16px;
        }

        .combo-card {
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 16px 38px rgba(26, 18, 12, 0.14);
            max-width: 340px;
            margin-left: auto;
            margin-right: auto;
        }

        .combo-images {
            gap: 8px;
        }

        .combo-image {
            height: 140px;
        }

        .combo-title {
            font-size: 22px;
        }

        .combo-price {
            font-size: 24px;
        }
    }

    @media (max-width: 560px) {
        .products-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 8px;
        }

        .section {
            padding: 36px 0 28px;
        }

        .section-header {
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 26px;
            margin-bottom: 8px;
            line-height: 1.2;
            letter-spacing: -0.3px;
            padding: 0 4px;
        }

        .section-subtitle {
            font-size: 13px;
            line-height: 1.45;
            max-width: 100%;
            padding: 0 12px;
            color: var(--text-muted);
        }

        .why-choose {
            padding: 32px 18px;
        }

        .features-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .feature {
            padding: 20px 16px;
        }

        .hero-product {
            display: flex;
            justify-content: center;
        }

        .hero-product-card {
            width: 100%;
            max-width: 100%;
            gap: 12px;
        }

        .hero-product-media {
            padding: 12px;
            border-radius: 18px;
        }

        .hero-product-image {
            height: 200px;
        }

        .hero-product-info {
            padding: 14px;
            border-radius: 16px;
        }

        .product-card {
            padding: 10px;
            border-radius: 16px;
            max-width: 100%;
        }

        .product-image {
            height: 150px;
        }

        .product-info {
            padding: 12px;
            border-radius: 12px;
        }

        .product-head {
            flex-direction: column;
            align-items: flex-start;
            gap: 6px;
        }

        .product-name {
            font-size: 18px;
        }

        .product-price {
            font-size: 16px;
            padding: 4px 8px;
            align-self: flex-start;
        }

        .product-desc {
            font-size: 12px;
            margin-bottom: 10px;
        }

        .add-to-cart-btn {
            width: 100%;
            text-align: center;
            padding: 9px 12px;
        }

        .combo-card {
            padding: 14px;
            border-radius: 16px;
            max-width: 100%;
        }

        .combo-image {
            height: 110px;
        }

        .combo-images {
            gap: 8px;
            margin-bottom: 12px;
        }

        .combo-title {
            font-size: 20px;
        }

        .combo-products {
            gap: 6px;
            margin-bottom: 12px;
        }

        .combo-price {
            font-size: 22px;
        }

        .combo-pricing {
            gap: 10px;
            margin-bottom: 12px;
        }

        /* Compact combo CTA on small screens */
        .combo-card .btn-primary {
            width: 100%;
            font-size: 12px;
            padding: 8px 10px;
            line-height: 1.2;
            border-radius: 10px;
        }
    }

    /* Extra small mobile optimization */
    @media (max-width: 380px) {
        .section {
            padding: 32px 0 24px;
        }

        .section-header {
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 24px;
            margin-bottom: 6px;
            letter-spacing: -0.2px;
        }

        .section-subtitle {
            font-size: 12px;
            line-height: 1.4;
            padding: 0 8px;
        }

        .hero {
            padding: 28px var(--page-padding) 36px;
        }

        .hero-text h1 {
            font-size: 28px;
            margin-bottom: 12px;
        }

        .hero-text p {
            font-size: 14px;
            margin-bottom: 18px;
        }

        .why-choose {
            padding: 28px 16px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-abstract">
        <span class="pill p1"></span>
        <span class="pill p2"></span>
        <span class="pill p3"></span>
        <span class="pill p4"></span>
    </div>
    <div class="hero-content">
        <div class="hero-banner">
            <img src="{% static 'banner.jpeg' %}" alt="Sulthan Fragrance banner">
        </div>
        <div class="hero-text">
            <h1>12 Hours<br>Minimum Lasting<br>Guarantee</h1>
            <p>Our perfume oil is a blend of 100% pure Provence (France) grown essential oils</p>
            <div class="hero-buttons">
                <a href="{% url 'store:home' %}#products" class="btn-primary">Explore Collection</a>
                <a href="{% url 'store:home' %}#combos" class="btn-secondary">View Combos</a>
                {% if categories %}
                <a href="{% url 'store:home' %}#products" 
                   class="hero-cat-pill {% if not current_category %}active{% endif %}">All Products</a>
                {% for category in categories %}
                <a href="?category={{ category.slug }}#products" 
                   class="hero-cat-pill {% if current_category.id == category.id %}active{% endif %}">{{ category.name }}</a>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Products Section -->
<section class="section" id="products">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Our Premium Collection</h2>
            <p class="section-subtitle">Discover our curated selection of luxury fragrances, each crafted to perfection with the finest ingredients.</p>
        </div>



        <div class="products-grid">
            {% for product in products %}
            <div class="product-card fade-in" onclick="window.location.href='{% url 'store:product_detail' product.slug %}'">
                <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image">
                <div class="product-info">
                    {% comment %} <span class="product-origin">{{ product.get_origin_display }}</span> {% endcomment %}
                    {% with first_variant=product.variants.all|first %}
                        <div class="product-head">
                            <h3 class="product-name">{{ product.name }}</h3>
                            <span class="product-price">
                                ₹{{ first_variant.price|default:product.price }}{% if first_variant %} • {{ first_variant.ml }}ml{% endif %}
                            </span>
                        </div>
                        <p class="product-desc">{{ product.short_description }}</p>
                        <div class="product-footer">
                            <button class="add-to-cart-btn" onclick="event.stopPropagation(); addToCart('{{ product.id }}', 'product', '{{ product.name|escapejs }}', '{{ first_variant.price|default:product.price }}', '{{ product.image.url }}', '{{ first_variant.id|default:'' }}', '{{ first_variant.ml|default:'' }}')">Add to Cart</button>
                        </div>
                    {% endwith %}
                </div>
            </div>
            {% empty %}
            <p style="grid-column: 1 / -1; text-align: center; color: var(--medium-gray);">No products available at the moment.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Combos Section -->
<section class="section" id="combos">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Exclusive Combo Offers</h2>
            <p class="section-subtitle">Save more with our specially curated fragrance combinations.</p>
        </div>

        <div class="products-grid">
            {% for combo in combos %}
            {% with first_item=combo.combo_products.first %}
            <div class="combo-card fade-in" onclick="window.location.href='{% url 'store:combo_detail' combo.slug %}'" style="cursor: pointer;">
                <span class="combo-badge">Save {{ combo.discount_percentage }}%</span>
                <h3 class="combo-title">{{ combo.title }}</h3>
                <p style="color: var(--text-muted); font-size: 13px; margin-top: -4px;">Includes {{ combo.combo_products.count }} product{{ combo.combo_products.count|pluralize }}</p>
                
                <div class="combo-images">
                    <div class="combo-image-wrapper">
                        {% if combo.image %}
                            <img src="{{ combo.image.url }}" alt="{{ combo.title }}" class="combo-image">
                        {% elif first_item and first_item.product.image %}
                            <img src="{{ first_item.product.image.url }}" alt="{{ first_item.product.name }}" class="combo-image">
                        {% else %}
                            <div class="combo-image" style="background: var(--light-gray); display: grid; place-items: center; color: var(--text-muted); height: 220px; border-radius: 18px; border: 1px dashed var(--border);">No image</div>
                        {% endif %}
                        {% comment %} <div class="combo-image-label">Combo cover</div> {% endcomment %}
                    </div>
                </div>
{% comment %} 
                <div class="combo-products">
                    {% for item in combo.combo_products.all %}
                    <span class="combo-product-tag" style="font-size:12px; padding:4px 8px; line-height:1.2;">
                        {{ item.product.name }} • {{ item.variant.ml }}ml
                    </span>
                    {% endfor %}
                </div> {% endcomment %}

                {% comment %} <div class="combo-pricing">
                    <span class="combo-original-price">₹{{ combo.original_price }}</span>
                    <span class="combo-price">₹{{ combo.discounted_price|floatformat:0 }}</span>
                    <span class="combo-discount">-{{ combo.discount_percentage }}%</span>
                </div> {% endcomment %}

                <button class="btn-primary" style="width: 100%;" onclick="event.stopPropagation(); addToCart('{{ combo.id }}', 'combo', '{{ combo.title }}', '{{ combo.discounted_price }}', '{% if combo.image %}{{ combo.image.url }}{% elif first_item and first_item.product.image %}{{ first_item.product.image.url }}{% endif %}')">Add Combo to Cart</button>
            </div>
            {% endwith %}
            {% empty %}
            <p style="grid-column: 1 / -1; text-align: center; color: var(--medium-gray);">No combo offers available at the moment.</p>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Why Choose Section -->
<section class="container">
    <div class="why-choose">
        <div class="section-header">
            <h2 class="section-title">Why Sulthan Fragrance?</h2>
        </div>

        <div class="features-grid">
            <div class="feature fade-in">
                <div class="feature-icon"><i class="fa-solid fa-clock-rotate-left"></i></div>
                <div class="feature-title">Long Lasting</div>
                <div class="feature-desc">Fragrances that stay with you all day long</div>
            </div>

            <div class="feature fade-in">
                <div class="feature-icon"><i class="fa-solid fa-droplet-slash"></i></div>
                <div class="feature-title">Non-Alcohol</div>
                <div class="feature-desc">Gentle on skin, suitable for everyone</div>
            </div>

            <div class="feature fade-in">
                <div class="feature-icon"><i class="fa-solid fa-earth-europe"></i></div>
                <div class="feature-title">Imported Oils</div>
                <div class="feature-desc">Premium ingredients from France & Arabia</div>
            </div>

            <div class="feature fade-in">
                <div class="feature-icon"><i class="fa-solid fa-sparkles"></i></div>
                <div class="feature-title">Premium Quality</div>
                <div class="feature-desc">Crafted with excellence and care</div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    // Cart Management - guest cart via cookie
    async function addToCart(id, type, name, price, image, variantId = null, variantMl = null) {
        // Prepare item data
        const itemData = {
            id: id,
            type: type,
            quantity: 1
        };
        
        if (type === 'product' && variantId) {
            itemData.variant_id = variantId;
        }
        
        // Use CartAPI to add to cart
        const result = await CartAPI.addToCart(itemData);
        
        if (result.success) {
            CartAPI.showNotification(`${name} added to cart!`);
        } else {
            CartAPI.showNotification(result.error || 'Failed to add to cart', 'error');
        }
    }

    function showNotification(message) {
        CartAPI.showNotification(message);
    }
    
    // Update cart count function (for backward compatibility) - REMOVED to prevent infinite loop
    // CartAPI now handles cart count updates automatically
    
    // Merge session cart when user logs in (only once on first load)
    let hasAttemptedMerge = false;
    window.addEventListener('cart-updated', async function() {
        if (CartAPI.isAuthenticated && !hasAttemptedMerge) {
            hasAttemptedMerge = true;
            // Try to merge session cart if exists
            const sessionCart = CartAPI.getSessionCart();
            if (sessionCart && sessionCart.length > 0) {
                await CartAPI.mergeSessionCart();
            }
        }
    });

    // Add animation styles
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(100px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes slideOutDown {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(100px);
            }
        }
    `;
    document.head.appendChild(style);

    // Fade in elements on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);

    document.querySelectorAll('.fade-in').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease-out, transform 0.6s ease-out';
        observer.observe(el);
    });
</script>
{% endblock %}